import"../chunks/CWj6FrbW.js";import{i as ee}from"../chunks/WWVtWIcG.js";import{e as te,t as j,g as a,f as ae,s as d,j as r,i as C,m as B,k as p,r as s}from"../chunks/4Vjq8Xjj.js";import{t as _,e as v,a as m,s as N}from"../chunks/B4dHhGZh.js";import{i as le}from"../chunks/DTNDf1gC.js";import{p as se,s as oe,r as re,e as ne}from"../chunks/yOqKe9X7.js";import{b as ie}from"../chunks/fZsvpuVm.js";import"../chunks/CCLTtN7-.js";import{F as de,a as ce,P as ue,C as pe}from"../chunks/BjFtRYDz.js";import{P as fe}from"../chunks/BI09sTSY.js";import{A as ve,a as me}from"../chunks/JHaWnEgc.js";var _e=_('<div class="btn preset-outlined-surface-500 h-48 w-full"><span>Upload PDFs</span> <!></div>'),be=_('<div class="file-item border border-secondary-100 rounded-sm w-full flex items-center gap-5 p-2"><div class="controls flex"><button class="cursor-pointer btn preset-ghost-tertriary-500"><!></button> <button class="cursor-pointer btn preset-ghost-tertriary-500"><!></button></div> <div class="w-full flex gap-2"><!> <span> </span> <span> </span></div> <button><!></button></div>'),ge=_('<div class="file-list p-2 flex flex-col gap-2 items-center"></div>'),we=_('<main class="flex flex-col justify-center items-center py-5"><div class="w-1/2 flex flex-col gap-5"><!> <div class="border-surface-500 border rounded-md h-full w-full"><!></div></div> <div class="w-1/2 mt-12 flex flex-col gap-12"><button id="ocr_btn" type="button" class=" w-full btn preset-filled-primary-500" disabled>Merge PDFs</button> <label for="" class="label"><span class="label-text">Merged File Name</span> <input type="text" class="input"></label> <a id="file_downloader" class="btn preset-filled-success-500 hidden">Download pdf</a></div></main>');function Me(O,R){te(R,!1),se.set("Merge PDFs");let o=B([]),b=-1,c=B("");async function z(e){const n=new fe;for(let i=0;i<e.length;i++)await n.add(e[i]);await n.setMetadata({title:`${a(c)}`});let t=await n.saveAsBlob();console.log(t);const l=document.querySelector("#file_downloader");if(l.download!==void 0){const i=URL.createObjectURL(t);l.setAttribute("href",i),l.setAttribute("download",a(c).split(".")[0])}}function E(e){a(o).length==0&&document.querySelector("#file_downloader").classList.add("hidden"),p(o,K(e.acceptedFiles,a(o))),console.log(a(o)),p(c,a(c)==""?a(o)[0].name.split(".")[0]:a(c)),a(o).length>0?document.querySelector("#ocr_btn").disabled=!1:document.querySelector("#ocr_btn").disabled=!0}function A(e,n){const t=[...a(o)],l=n==="up"?e-1:e+1;console.log(t),t[e],document.querySelector("#file_downloader").classList.contains("hidden")||document.querySelector("#file_downloader").classList.add("hidden"),l>=0&&l<t.length&&([t[e],t[l]]=[t[l],t[e]],console.log(t),p(o,t))}function I(e){p(o,a(o).filter((n,t)=>t!=e))}function K(e,n){let t=[];return t=n,e.forEach((l,i)=>{b<i&&(t.push(l),b++)}),console.log(b),t}function V(){z(a(o)),document.querySelector("#file_downloader").classList.remove("hidden")}ee();var g=we(),w=r(g),k=r(w);de(k,{maxFiles:50,accept:"application/pdf",subtext:"Attach PDFs",onFileChange:e=>{E(e)},classes:"w-full",children:(e,n)=>{var t=_e(),l=d(r(t),2);ce(l,{}),s(t),m(e,t)},$$slots:{default:!0}});var D=d(k,2),G=r(D);{var H=e=>{var n=ge();ne(n,7,()=>a(o),(t,l)=>t.name+l,(t,l,i)=>{var y=be(),x=r(y),u=r(x),Q=r(u);ve(Q,{}),s(u);var f=d(u,2),T=r(f);me(T,{}),s(f),s(x);var F=d(x,2),$=r(F);ue($,{});var P=d($,2),W=r(P,!0);s(P);var U=d(P,2),X=r(U);s(U),s(F);var q=d(F,2),Y=r(q);pe(Y,{}),s(q),s(y),j(Z=>{u.disabled=a(i)===0,f.disabled=a(i)===a(o).length-1,N(W,a(l).name),N(X,`(${Z??""} KB)`)},[()=>Math.round(a(l).size/1024)],C),v("click",u,()=>A(a(i),"up")),v("click",f,()=>A(a(i),"down")),v("click",q,()=>I(a(i))),m(t,y)}),s(n),m(e,n)};le(G,e=>{a(o).length>0&&e(H)})}s(D),s(w);var S=d(w,2),L=r(S),h=d(L,2),M=d(r(h),2);re(M),s(h);var J=d(h,2);s(S),s(g),j(e=>oe(J,"download",e),[()=>a(c).split(".")[0]],C),v("click",L,()=>{V()}),ie(M,()=>a(c),e=>p(c,e)),m(O,g),ae()}export{Me as component};
