import{t as m,a as v}from"../chunks/CaasTpf9.js";import{i as ae}from"../chunks/OKV8WO5A.js";import{e as le,t as C,g as a,f as se,s as d,i as r,j as z,m as B,k as f,r as s}from"../chunks/EW6ToMZV.js";import{e as _,s as N}from"../chunks/C-8pGi1S.js";import{i as re}from"../chunks/CEyAtwe4.js";import{s as oe,r as ne,e as ie}from"../chunks/CEK-eUOh.js";import{b as de,A as ce,a as ue}from"../chunks/Dmx_-YCo.js";import{F as fe,A as pe,a as ve,P as _e,C as me}from"../chunks/FiiLKZqd.js";import{P as be}from"../chunks/BJzTzqsX.js";var ge=m('<div class="btn preset-outlined-surface-500 h-48 w-full"><span>Upload PDFs</span> <!></div>'),we=m('<div class="file-item border border-secondary-100 rounded-sm w-full flex items-center gap-5 p-2"><div class="controls flex"><button class="cursor-pointer btn preset-ghost-tertriary-500"><!></button> <button class="cursor-pointer btn preset-ghost-tertriary-500"><!></button></div> <div class="w-full flex gap-2"><!> <span> </span> <span> </span></div> <button><!></button></div>'),he=m('<div class="file-list p-2 flex flex-col gap-2 items-center"></div>'),ye=m('<main class="flex flex-col justify-center items-center py-5"><div class="w-1/2 flex flex-col gap-5"><!> <div class="border-surface-500 border rounded-md h-full w-full"><!></div></div> <div class="w-1/2 mt-12 flex flex-col gap-12"><button id="ocr_btn" type="button" class=" w-full btn preset-filled-primary-500" disabled>Merge PDFs</button> <label for="" class="label"><span class="label-text">Merged File Name</span> <input type="text" class="input"></label> <a id="file_downloader" class="btn preset-filled-success-500 hidden">Download pdf</a></div> <a href="/" class="btn preset-filled-surface-500 rounded-full h-12 w-12 fixed top-5 left-5"><!></a></main>');function $e(O,R){le(R,!1);let o=B([]),b=-1,c=B("");async function E(e){const n=new be;for(let i=0;i<e.length;i++)await n.add(e[i]);await n.setMetadata({title:`${a(c)}`});let t=await n.saveAsBlob();console.log(t);const l=document.querySelector("#file_downloader");if(l.download!==void 0){const i=URL.createObjectURL(t);l.setAttribute("href",i),l.setAttribute("download",a(c).split(".")[0])}}function I(e){a(o).length==0&&document.querySelector("#file_downloader").classList.add("hidden"),f(o,V(e.acceptedFiles,a(o))),console.log(a(o)),f(c,a(c)==""?a(o)[0].name.split(".")[0]:a(c)),a(o).length>0?document.querySelector("#ocr_btn").disabled=!1:document.querySelector("#ocr_btn").disabled=!0}function k(e,n){const t=[...a(o)],l=n==="up"?e-1:e+1;console.log(t),t[e],document.querySelector("#file_downloader").classList.contains("hidden")||document.querySelector("#file_downloader").classList.add("hidden"),l>=0&&l<t.length&&([t[e],t[l]]=[t[l],t[e]],console.log(t),f(o,t))}function K(e){f(o,a(o).filter((n,t)=>t!=e))}function V(e,n){let t=[];return t=n,e.forEach((l,i)=>{b<i&&(t.push(l),b++)}),console.log(b),t}function G(){E(a(o)),document.querySelector("#file_downloader").classList.remove("hidden")}ae();var g=ye(),w=r(g),S=r(w);fe(S,{maxFiles:50,accept:"application/pdf",subtext:"Attach PDFs",onFileChange:e=>{I(e)},classes:"w-full",children:(e,n)=>{var t=ge(),l=d(r(t),2);ve(l,{}),s(t),v(e,t)},$$slots:{default:!0}});var D=d(S,2),H=r(D);{var J=e=>{var n=he();ie(n,7,()=>a(o),(t,l)=>t.name+l,(t,l,i)=>{var x=we(),F=r(x),u=r(F),W=r(u);ce(W,{}),s(u);var p=d(u,2),X=r(p);ue(X,{}),s(p),s(F);var A=d(F,2),U=r(A);_e(U,{});var q=d(U,2),Y=r(q,!0);s(q);var j=d(q,2),Z=r(j);s(j),s(A);var P=d(A,2),ee=r(P);me(ee,{}),s(P),s(x),C(te=>{u.disabled=a(i)===0,p.disabled=a(i)===a(o).length-1,N(Y,a(l).name),N(Z,`(${te??""} KB)`)},[()=>Math.round(a(l).size/1024)],z),_("click",u,()=>k(a(i),"up")),_("click",p,()=>k(a(i),"down")),_("click",P,()=>K(a(i))),v(t,x)}),s(n),v(e,n)};re(H,e=>{a(o).length>0&&e(J)})}s(D),s(w);var h=d(w,2),L=r(h),y=d(L,2),$=d(r(y),2);ne($),s(y);var Q=d(y,2);s(h);var M=d(h,2),T=r(M);pe(T,{class:"size-8"}),s(M),s(g),C(e=>oe(Q,"download",e),[()=>a(c).split(".")[0]],z),_("click",L,()=>{G()}),de($,()=>a(c),e=>f(c,e)),v(O,g),se()}export{$e as component};
