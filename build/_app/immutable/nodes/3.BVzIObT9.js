import"../chunks/CWj6FrbW.js";import{i as re}from"../chunks/WWVtWIcG.js";import{e as se,t as A,g as o,f as ne,s as d,i as E,j as i,r as s,m as q,n as ie,k as p}from"../chunks/4Vjq8Xjj.js";import{t as b,e as g,a as v,b as ce,s as D}from"../chunks/B4dHhGZh.js";import{i as de}from"../chunks/DTNDf1gC.js";import{p as pe,s as ue,r as fe,e as me}from"../chunks/yOqKe9X7.js";import{b as ve}from"../chunks/fZsvpuVm.js";import"../chunks/CCLTtN7-.js";import{F as _e,a as ge,P as be,C as we}from"../chunks/BjFtRYDz.js";import{P as he,s as xe}from"../chunks/Cg-cZ5-n.js";import{P as ye}from"../chunks/BI09sTSY.js";import{A as Fe,a as Pe}from"../chunks/JHaWnEgc.js";var $e=b('<div class="btn preset-outlined-surface-500 h-48 w-full"><span>Upload Imagess</span> <!></div>'),ke=b('<div class="file-item border border-secondary-100 rounded-sm w-full flex items-center gap-5 p-2"><div class="controls flex"><button class="cursor-pointer btn preset-ghost-tertriary-500"><!></button> <button class="cursor-pointer btn preset-ghost-tertriary-500"><!></button></div> <div class="w-full flex gap-2"><!> <span> </span> <span> </span></div> <button><!></button></div>'),Ae=b('<div class="file-list p-2 flex flex-col gap-2 items-center"></div>'),qe=b('<main class="flex flex-col justify-center items-center  py-5"><div class="w-1/2 flex flex-col gap-5"><!> <div class="border-surface-500 border rounded-md h-full w-full"><!></div></div> <div class="w-1/2 mt-12 flex flex-col gap-12"><button id="ocr_btn" type="button" class=" w-full btn preset-filled-primary-500" disabled>Convert to PDF</button> <!> <label for="" class="label"><span class="label-text">PDF File Name</span> <input type="text" class="input"></label> <a id="file_downloader" class="btn preset-filled-success-500 hidden">Download pdf</a></div></main>');function Oe(N,O){se(O,!1),pe.set("JPG to PDF");let R,c=q(0),n=q([]),w=-1,u=q("");async function T(t,l,e){console.log(t);try{const a=await xe.createWorker("eng",1,{logger:f=>{console.log(f),f.status=""}}),{data:r}=await a.recognize(t,{pdfTitle:`part_${l}`},{pdf:!0});return console.log(r.text),R=r.pdf,a.terminate(),p(c,o(c)+1/e*100),p(c,o(c)>100?100:Math.floor(o(c))),Promise.resolve({pdf_raw:r.pdf,index:l})}catch(a){return console.error(a),Promise.reject(a)}}function G(t,l){const e=new Blob([new Uint8Array(t)],{type:"application/pdf"});return e.name=l,e.lastModifiedData=new Date,e}async function J(t){const l=new ye;console.log(t),t.map(r=>{r.pdf_file=G(r.pdf,`${r.index}.pdf`)});for(let r=0;r<t.length;r++)await l.add(t[r].pdf_raw);await l.setMetadata({title:`${o(u)}`});let e=await l.saveAsBlob();console.log("error not above");const a=document.querySelector("#file_downloader");if(a.download!==void 0){const r=URL.createObjectURL(e);a.setAttribute("href",r),a.setAttribute("download",o(u).split(".")[0])}}function K(t){o(n).length==0&&document.querySelector("#file_downloader").classList.add("hidden"),p(c,0),console.log(t.acceptedFiles),p(n,W(t.acceptedFiles,o(n))),console.log(o(n)),p(u,o(u)==""?o(n)[0].name.split(".")[0]:o(u)),o(n).length>0?document.querySelector("#ocr_btn").disabled=!1:document.querySelector("#ocr_btn").disabled=!0}function S(t,l){const e=[...o(n)],a=l==="up"?t-1:t+1;console.log(e),e[t],document.querySelector("#file_downloader").classList.contains("hidden")||document.querySelector("#file_downloader").classList.add("hidden"),a>=0&&a<e.length&&([e[t],e[a]]=[e[a],e[t]],console.log(e),p(n,e))}function V(t){p(n,o(n).filter((l,e)=>e!=t))}function W(t,l){let e=[];return e=l,t.forEach((a,r)=>{w<r&&(console.log(a),e.push(a),w++)}),console.log(w),console.log(e),e}async function H(){p(c,null);let t=o(n);console.log(t);let l=[];for(let e=0;e<t.length;e++)await T(t[e],e,t.length).then(a=>{l.push(a)});l.sort((e,a)=>e.index-a.index),await J(l),document.querySelector("#file_downloader").classList.remove("hidden"),p(c,o(c)<100?100:o(c)),console.log(l)}re();var h=qe(),x=i(h),L=i(x);_e(L,{maxFiles:50,accept:"image/jpeg",subtext:"Attach Images",onFileChange:t=>{K(t)},classes:"w-full",capture:!0,children:(t,l)=>{var e=$e(),a=d(i(e),2);ge(a,{}),s(e),v(t,e)},$$slots:{default:!0}});var j=d(L,2),Q=i(j);{var X=t=>{var l=Ae();me(l,7,()=>o(n),(e,a)=>e.name+a,(e,a,r)=>{var f=ke(),F=i(f),m=i(F),Z=i(m);Fe(Z,{}),s(m);var _=d(m,2),ee=i(_);Pe(ee,{}),s(_),s(F);var P=d(F,2),B=i(P);be(B,{});var $=d(B,2),te=i($,!0);s($);var I=d($,2),oe=i(I);s(I),s(P);var k=d(P,2),ae=i(k);we(ae,{}),s(k),s(f),A(le=>{m.disabled=o(r)===0,_.disabled=o(r)===o(n).length-1,D(te,o(a).name),D(oe,`(${le??""} KB)`)},[()=>Math.round(o(a).size/1024)],E),g("click",m,()=>S(o(r),"up")),g("click",_,()=>S(o(r),"down")),g("click",k,()=>V(o(r))),v(e,f)}),s(l),v(t,l)};de(Q,t=>{o(n).length>0&&t(X)})}s(j),s(x);var M=d(x,2),U=i(M),C=d(U,2);he(C,{get value(){return o(c)},max:100,children:(t,l)=>{ie();var e=ce();A(()=>D(e,o(c)!=null?o(c)+"%":"loading...")),v(t,e)},$$slots:{default:!0}});var y=d(C,2),z=d(i(y),2);fe(z),s(y);var Y=d(y,2);s(M),s(h),A(t=>ue(Y,"download",t),[()=>o(u).split(".")[0]],E),g("click",U,()=>{H()}),ve(z,()=>o(u),t=>p(u,t)),v(N,h),ne()}export{Oe as component};
